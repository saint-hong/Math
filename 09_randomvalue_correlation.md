# 확률변수와 상관관계

## 확률적 데이터와 확률 변수

### ◈ 확률적 데이터
- 데이터의 특징 : 변하지 않는 데이터, 측정할 때마다 변하는 데이터
    - 변하지 않는 데이터와 변하는 데이터를 구분할 수 있을까?
    - 100% 정확하게 예측할 수 없는 데이터로부터 얻을 수 있는 지식은?
    - 이러한 데이터의 특징을 수학적으로 표현할 수 있을까?
- ```결정론적 데이터 deterministic data``` : 실험, 측정, 조사 등을 통해 어떤 데이터 값을 반복적으로 얻을 때 항상 같은 값이 나오는 데이터. 생년월일, 이름, 전화번호, 위치정보 등
- ```확률적 데이터 random data, probabilistic data``` : 정확히 예측할 수 없는 값이 나오는 데이터. 혈압, 키, 체중, 몸무게 등 **대부분의 데이터는 확률적데이터에 속한다.**
- 데이터가 확률적인 이유 : 여러조건이나 상황등에 데이터값이 영향을 받거나, 측정할 때 발생하는 오차때문

### ◈ 분포
- ```분포 distribution``` : 확률적 데이터에서 어떤 값이 자주나오고 어떤 값이 드물게 나오는지를 나타내는 정보
- 범주형 데이터는 **카운터 플롯 count plot**, 실수형 데이터는 **히스토그램 histogram**을 사용하여 시각화 할 수 있다.

### ◈ 기술통계
- ```기술통계 descriptive statistics``` :  확률적 데이터의 분포의 특징을 나타내는 숫자들로 분포를 나타내는 것
    - 표본평균, 표본중앙값, 표본최빈값
    - 표본분산, 표본표준편차
    - 표본첨도, 표본왜도
    
### ◈ 표본평균
- ```표본평균 sample mean, sample average``` : 확률적인 데이터값을 대표하는 기술통계중 하나, 데이터 분포의 대략적인 위치를 나타낸다. 
    - $m = \bar{x} = \dfrac{1}{N} \sum_{i=1}^{N} x_i$
    - N은 자료의 갯수, i는 자료의 순서
    
### ◈ 표본중앙값
- ```표본중앙값 sample median``` : 전체 자료를 크기별로 정렬했을 때 가장 중앙에 위치하는 값이다.
- 중앙값의 정의는 여러가지
- 전체 표본 개수가 N개일때,
    - N이 홀수 : (N+1) / 2 번째 표본의 값
    - N이 짝수 : N / 2 번째 표본의 값과 (N / 2) + 1 번째 표본의 값의 평균
- 99명의 혈압을 크기순으로 정렬 했을 때 표본중앙값은 50번째 사람의 혈압
- 100명의 혈압을 크기순으로 정렬 했을 때 표본중앙값은 50, 51번째 사람의 혈압의 평균

### ◈ 표본최빈값
- ```표본최빈값 sample frequent value, smaple mode``` : 데이터값 중 가장 빈번하게 나오는 값이다. 
- 유한한 종류의 값이 있는 데이터에서는 최빈값을 구하기 쉽지만 혈압, 키, 몸무게 등 연속적인 값이 있는 데이터에서는 최빈값을 구하기 어렵다. 
- 연속적인 값의 경우에는 일정한 구간 간격으로 나누어 **가장 많은 데이터를 가진 구간의 대푯값**을 최빈값으로 가정한다. 
- 이외에도 여러가지 방법이 있다. 

### ◈ 단본분포와 다봉분포
- 분포의 모양
    - 단봉 분포 uni-modal : 봉우리가 한개인 분포의 형태
    - 다봉 분포 multi-modal : 봉우리가 여러개인 분포의 형태

### ◈ 대칭분포의 특성
- 분포가 표본평균을 기준으로 대칭 symmetric이면 **표본중앙값은 표본평균과 같다.**
- 분포가 대칭이면서 단봉분포이면 **표본최빈값은 표본평균과 같다.**
- 대칭인 분포의 데이터에 다른 데이터가 들어와 비대칭이 되면 **표본평균 > 표본중앙값 > 표본최빈값 순으로 영향을 받는다.**
    - 각 통계값의 위치가 변한다.

### ◈ 분산과 표준편차
- ```표본분산 sample variance``` : 데이터가 얼마나 변동variation하는지 알려주는 정보의 특징값
    - $S^2 = \dfrac{1}{N} \sum_{i=1}^{N}(x_i - \bar{x})^2$
- ```표본표준편차 sample standard deviation``` : 데이터가 얼마나 변동하는지 알려주는 정보의 특징값
    - $standard \; deviation = \sqrt{variance}$
- 표본분산은 자료값과 평균 사이의 거리를 의미한다. 
- 분포가 하나의 대표값 주위에 모여있다면 대부분의 데이터는 "대푯값+-표준편차" 범위안에 있다고 말할 수 있다.
- 표본분산은 **편향 표본분산 biased sample variance** 에 해당한다. 
- ```비편향 표본분산 unbiased smaple variance```
    - $\small{s}^2_{unbiased} = \dfrac{1}{N-1} \sum_{i=1}^{N}(x_i - \bar{x})^2$
    - 분모가 N-1로 바뀐다. 
    - 확률변수의 분산에서 증명된다.

### ◈ 표본비대칭도
- ```표본비대칭도 smaple skewness``` : 평균과의 거리의 세제곱을 이용하여 구한 특징값
    - $skewness=\dfrac{\dfrac{1}{N}\sum_{i=1}^{N}(x_i - \bar{x})^3}{\sqrt{\dfrac{1}{N-1}\sum_{i=1}^{N}(x_i - \bar{x})^2}^3}$
- **표본비대칭도가 0이면 분포가 대칭형태이다.**
- 표본비대칭도가 음수면 표본평균값을 기준으로 왼쪽에 있는 값이 나올 가능성이 크다.

### ◈ 표본첨도
- ```표본첨도 sample kurtosis``` :  평균과의 거리의 네제곱을 이용하여 구한 특징값.
    - $kurtosis=\dfrac{\dfrac{1}{N}\sum_{i=1}^{N}(x_i - \bar{x})^4}{(\dfrac{1}{N}\sum_{i=1}^{N}(x_i - \bar{x})^2)^3}-3$
- 데이터가 중앙에 몰려있는 정도를 정밀하게 비교할 때 쓰인다. 
- 표본첨도의 기준은 정규분포 : 정규분포보다 첨도가 높으면 양수, 정규분포보다 첨도가 낮으면 음수

### ◈ 표본모멘트 sample moment
- ```표본모멘트 sample moment``` : 분산, 비대칭도, 첨도를 구하기 위해서 제곱, 세제곱 네제곱을 하는 것 처럼 k제곱을 이용하여 구한 모멘트
    - 표본모멘트 $= \dfrac{1}{N}\sum_{i=1}^{N}x_{i}^k$
    - 통계값의 공식의 기본 형태가 표본모멘트와 같다.
- 2차 표본모멘트 이상은 평균을 뺀 **표본중앙모멘트 sample centered moment** 값을 사용
    - 표본중앙모멘트 $=\dfrac{1}{N}\sum_{i=1}^{N}(x_i-\bar{x})^k$
- 평균 : 1차 모멘트
- 분산 : 2차 모멘트
- 비대칭도 : 3차 모멘트
- 첨도 : 4차 모멘트

## ◈ 확률변수
- 확률공간의 표본을 입력받아서 실수인 숫자로 출력해주는 함수와 같다.
- 확률변수에서 출력되는 실수가 곧 현실의 데이터의 값이다.
    - $\omega \in \Omega \rightarrow x \in R$ 
    - $X(\omega) = x$
- 확률변수 기호는 대문자 알파벳 사용 (소문자 알파벳을 사용하는 경우도 있음)
- 확률변수에 의해 할당된 실수는 소문자 알파벳 사용

### ◈ 이산확률변수
- ```이산확률변수 discrete random variable``` : 확률변수값이 연속적이지 않고 떨어져 있도록 정의 된 것
    - 플레잉카드의 모든 무늬의 표본집합에 대해서 숫자를 할당하면 확률변수가 된다.
    - X(♠) = 1, X(♡) = 2, X(◇) = 3, X(♣) = 4
    - 표본공간의 표본 스페이드를 입력받아서 실수 1을 출력해준다.
- 확률공간의 표본에는 확률이 할당되어 있음 : 확률질량함수 p(♡) = 1/4
- 표본공간의 원소의 갯수가 무한대인 경우도 이산확률변수가 가능하다.
    - **기하분포 geometric distribution**, **포아송 분포 Poisson distribution** : 표본의 갯수가 무한대이면서 양의 정수값을 가지는 이산분포이다.

### ◈ 연속확률변수
- ```연속확률변수 continuous random variable``` : 연속적이고 무한대의 실수 표본값을 가지는 확률변수
    - 원반에 던진 화살의 각도 문제
- 모든 표본이 실수인 숫자로 변한다면 사건은 구간사건의 조합으로 표시할 수 있다.
- 확률분포를 확률분포함수로 나타낼 수 있다는 의미와 같다. 

### ◈ 확률변수는 데이터 생성기
- 확률적 데이터가 만들어지는 경우 : 실험이라는 행위에 의해서 만들어진다.
    - 주사위를 던지는 실험
    - 자동차 엔진의 출력을 측정하는 실험
    - 혈압을 측정하는 실험
- 이러한 확률적 데이터를 생성한 것은 **데이터 생성기** 와 같다. (주사위, 엔진, 혈압)
- 즉 현실의 데이터는 이것을 만드는 실험적 행위에 기반한 데이터 생성기에 의해서 만들어진다고 생각할 수 있다. **데이터 생성기 = 확률변수**
- 붓꽃 데이터의 확률변수 : 
    - 연속확률변수 : 꽃잎의 폭, 길이, 꽃받침의 폭, 길이
    - 이산확률변수 : 붓꽃의 종
    
### ◈ 확률변수와 현실 데이터의 관계
- ```실현 realization, 표본화 sampling``` : 확률분포함수에 따라 표본공간의 표본이 현실 세계의 데이터로 선택되는 것 
    - 이상적, 추상적, 수학적인 세계에서 현실로 넘어가는 과정과 같다.
    - 현실 세계의 데이터는 확률변수가 가진 확률분포에 따라서 실수 표본공간에서 **선택된 표본**이다.
- 확률변수라는 데이터 모형에 따르면 현실의 표본 데이터는 수학적 세계가 현실 세계에 투영된 그림자와 같다.
- 현실의 표본 데이터의 히스토그램이나 기술통계 등 데이터 분포의 특성이 깨끗한 형태가 아닌 것은 실현과정에서 생긴 잡음, 오류일 뿐이며 그 내면에는 원래의 수학적 특성을 내포하고 있다.
- 확률변수와 실제 데이터의 관계
    - 확률변수로부터 데이터를 여러번 생성하는 경우 실제 데이터값은 매번 달라지지만, 확률변수 자체는 변하지 않는다.
    - 확률변수의 확률분포함수는 우리가 직접 관찰 할 수 없다. 확류변수에서 만들어지는 실제 데이터값을 이용하여 확률분포함수가 어떤 형태인지 추정할 수 있다. 
    - 실제 데이터값은 확률변수에서 실현된 것이므로 확률변수의 특성을 반영한다. 데이터의 갯수가 적으면 확률변수의 특성을 반영하지 못하지만 갯수가 많으면 보다 정확하게 확률분포함수를 묘사할 수 있다.
    
### ◈ 확률변수를 사용한 데이터 분석
- 확률변수를 사용한 데이터 분석 과정
    - 데이터를 수집한다.
    - 수집한 데이터가 어떤 확률변수의 표본 데이터라고 가정한다.
    - 데이터를 사용하여 해당 확률변수의 확률분포함수의 모양을 결정한다.
    - 결정된 확률변수로부터 다음에 생성될 데이터나 데이터의 특성을 예측 prediction 한다.
- 데이터 분석 과정중에서 가장 중요한 부분은 데이터값으로부터 확률변수의 확률분포함수를 역설계 reverse_engineering 하여 만드는 것이다. 
- 데이터에서 확률분포함수의 모양을 구하는 방법 : 기술통계값 이용하여 구하기
    - 데이터 분포가 갖는 표본평균, 표본분산 등의 기술통계값 구한다.
    - 이 값과 같은 기술통계값을 갖는 확률분포함수 찾는다.

## 기댓값과 확률변수의 변환
- 표본평균, 표본분산 등의 기술통계값은 현실세계의 데이터의 분포 모양을 설명한 특성값이다. 
- 이론적인 확률분포함수의 모양을 서술하는 특성값은 다르다.

### ◈ 확률변수의 기댓값
- ```기댓값 expectation``` : 확률변수의 이론적 평균값. 평균 mean 이라고 말하기도 한다.
- ```이산확률변수의 기댓값``` : 표본공간의 원소 xi의 가중합, 가중치는 xi가 나올 수 있는 확률질량함수 p(xi) 값이다.
    - $\mu_{x} = E[X] = \sum_{x_i \in \Omega} x_ip(x_i)$
    - 공정한 주사위에서 나오는 숫자의 확률변수 X의 기댓값 : 
    - $\mu_{x} = 1 \cdot p(1) + 2 \cdot p(2) + 3 \cdot p(3) + 4 \cdot p(4) + 5 \cdot p(5) + 6 \cdot p(6)$ 
- 현실 데이터의 표본평균 : $\bar{x}=\dfrac{1}{N}\sum_{i=1}^{N}x$
    - 기댓값 공식과 표본평균 공식에서 x_i의 의미는 다르다. 기댓값의 x_i는 표본공간의 모든 원소를 의미하고, 표본평균 공식에서의 x_i는 선택된(realized, sampled) 표본을 의미한다.
    - 기댓값 공식에서는 확률변수의 표본공간의 모든 표본은 선택되기 이전의 상태이므로 확률이 부여되지 않았기 때문에 확률을 가중치로 곱해준다. 반면에 현실 데이터의 표본평균에서는 표본이 확률에 의해 선택된 것이기 때문에 확률을 가중치로 곱하지 않아도 된다. 
- ```연속확률변수의 기댓값``` : 확률밀도함수 p(x)를 가중치로 하여 모든 가능한 표본 x를 적분한 값이다.
    - $\mu_{x} = E[X] = \int_{-\infty}^{\infty}xp(x)dx$
- 기댓값은 여러가능한 x값을 확률값에 따라 가중합을 한 것과 같다. 따라서 가장 확률 또는 확률밀도가 높은 x값 근처의 값이 된다. **즉 확률 또는 확률밀도가 모여있는 곳의 위치이다.**

